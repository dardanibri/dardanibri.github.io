<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dardan Ibri ‚Äì Entwickler f√ºr Menschen & Business</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&family=Lato:wght@600;700;900&display=swap" rel="stylesheet">

<style>
:root{
  /* Background Option B (leicht dunkler, edel) */
  --bg-top:#D4DBE2;
  --bg-btm:#B9C5D0;

  --navy-900:#0E2740;
  --navy-800:#1C2F45;
  --navy-700:#264561;

  --white:#ffffff;
  --muted:#25384B;  /* Text auf hell */
  --gold:#E6B800;   /* kr√§ftigeres Gold f√ºr Kontrast */
  --gold-ring:rgba(230,184,0,.38);

  --card-dark:#14324D;    /* dunkle Karten auf hellem BG */
  --card-white:#ffffff;   /* helle Karten (Logos/Abschluss) */

  --radius-xl:26px;
  --radius-lg:20px;
  --radius-md:14px;

  --shadow-soft:0 10px 26px rgba(13,31,51,.18);
  --shadow-card:0 14px 34px rgba(13,31,51,.22);
}

/* Base */
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:linear-gradient(180deg,var(--bg-top),var(--bg-btm));color:var(--muted);font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;line-height:1.65}
img{display:block;max-width:100%;height:auto}
a{color:inherit;text-decoration:none}
.container{max-width:1160px;margin:0 auto;padding:0 20px}
section{padding:86px 0}      /* viel Luft f√ºr ruhigen Flow */
section.tight{padding:56px 0}

/* Typography */
h1,h2,h3{font-family:Lato, Poppins, sans-serif;line-height:1.12;margin:0 0 10px}
h1{font-size:clamp(40px,5.2vw,80px);color:var(--white);font-weight:900;text-shadow:0 2px 6px rgba(0,0,0,.35)}
h2{font-size:clamp(28px,3.2vw,42px);color:var(--gold);font-weight:900}
h3{font-size:clamp(22px,2.4vw,30px);color:var(--gold);font-weight:800}
.lead{font-size:clamp(16px,1.55vw,19px);color:var(--navy-800)}
p{margin:0 0 14px}

/* Layout helpers */
.grid{display:grid;gap:24px}
.grid-2{grid-template-columns:1fr 1fr}
.grid-3{grid-template-columns:repeat(3,1fr)}
@media (max-width:980px){.grid-2,.grid-3{grid-template-columns:1fr}}
.mt8{margin-top:8px}.mt16{margin-top:16px}.mt24{margin-top:24px}.mt32{margin-top:32px}.mt40{margin-top:40px}

/* Buttons */
.btn{display:inline-flex;align-items:center;gap:10px;padding:14px 22px;border-radius:14px;border:1px solid transparent;font-weight:600;cursor:pointer;transition:.25s ease}
.btn-gold{background:var(--gold);color:var(--navy-900);box-shadow:var(--shadow-soft)}
.btn-gold:hover{transform:translateY(-1px);filter:brightness(1.02)}
.btn-ghost{background:transparent;border-color:#9FB4C8;color:var(--navy-900)}
.btn-ghost:hover{background:rgba(255,255,255,.6)}

/* HERO */
.hero{padding: clamp(40px,6vw,80px) 0 clamp(24px,4vw,48px)}
.hero-wrap{display:grid;gap:32px;grid-template-columns:1.2fr 1fr;align-items:center}
@media (max-width:980px){.hero-wrap{grid-template-columns:1fr}}
.hero-sub{color:var(--gold);font-family:Lato, Poppins, sans-serif;font-weight:800;font-size:clamp(20px,2.2vw,28px);text-shadow:0 1px 3px rgba(0,0,0,.22)}
.hero-txt{max-width:680px}
.hero-actions{display:flex;gap:16px;flex-wrap:wrap;margin-top:22px}
.portrait{
  position:relative;width:100%;height:560px;border-radius:var(--radius-xl);overflow:hidden;background:#dfe7ef;
  box-shadow:var(--shadow-card);
}
.portrait img{
  width:100%;height:100%;object-fit:cover;object-position:50% 4%; /* Kopf bleibt voll sichtbar */
  /* dezente Maske, oben minimal angeschnitten f√ºr Dynamik ‚Äì ohne Haare zu cutten */
  clip-path:polygon(0 3%, 92% 0, 100% 9%, 100% 95%, 8% 100%, 0 91%);
}

/* Cards + Halo (nur Rand, kein Text-Glow) */
.card{
  position:relative;border-radius:var(--radius-lg);
  padding:22px clamp(20px,2.2vw,28px);
  box-shadow:var(--shadow-soft);
  border:1px solid rgba(14,39,64,.08);
}
.card-dark{background:var(--card-dark);color:var(--white)}
.card-gold{background:var(--gold);color:var(--navy-900)}
.card-white{background:var(--card-white);color:var(--muted)}
.card.halo:after{
  content:"";position:absolute;inset:-8px;border-radius:inherit;pointer-events:none;
  box-shadow:0 0 0 2px var(--gold-ring), 0 12px 36px rgba(14,39,64,.18);
}

/* Vision & Mission (ohne globalen Titel, aber starke H3) */
.vm{display:grid;gap:24px;grid-template-columns:1fr 1fr}
@media (max-width:980px){.vm{grid-template-columns:1fr}}
.card-dark h3,.card-gold h3{margin-bottom:8px}

/* Werte */
.values .value{display:grid;grid-template-columns:auto 1fr;gap:16px;align-items:flex-start}
.values .icon{
  width:56px;height:56px;border-radius:50%;display:grid;place-items:center;
  background:rgba(255,255,255,.12);
  border:2px solid var(--gold);
  box-shadow: inset 0 0 0 4px rgba(255,255,255,.06);
}
.values .icon svg{width:30px;height:30px;stroke:currentColor;stroke-width:2.4;fill:none}
.value h4{font-family:Lato;font-size:26px;font-weight:900;margin:2px 0 6px}
.value p{color:rgba(255,255,255,.94)}
.value.gold{background:var(--gold);color:var(--navy-900)}
.value.gold p{color:#1f2a3a}
.value.gold .icon{border-color:var(--navy-900);background:rgba(255,255,255,.18)}
.value.card{transition:transform .2s ease}
.value.card:hover{transform:translateY(-2px)}

/* Logos ‚Äì einheitlich, zentriert */
.logos{display:flex;gap:28px;justify-content:center;align-items:center;flex-wrap:wrap;margin-top:14px}
.logos img{max-height:56px;width:auto;filter:none;opacity:.98} /* gleich hoch, native Farbe */

/* KPIs integriert (ohne Extra-√úberschrift) */
.kpis{display:grid;gap:18px;grid-template-columns:repeat(2,1fr);margin-top:20px}
@media (max-width:760px){.kpis{grid-template-columns:1fr}}
.kpi{position:relative;border-radius:16px;padding:18px 18px;background:#ffffffcc;color:var(--navy-900);border:1px solid rgba(14,39,64,.08);box-shadow:var(--shadow-soft)}
.kpi.gold{background:var(--gold);color:var(--navy-900)}
.kpi:after{content:"";position:absolute;inset:-7px;border-radius:inherit;box-shadow:0 0 0 2px var(--gold-ring);pointer-events:none}
.knum{font-family:Lato;font-weight:900;font-size:32px;line-height:1;margin-bottom:6px}
.klabel{color:var(--navy-800)}

/* Slogan */
.slogan-wrap{padding:34px 0}
.slogan{
  font-family:Lato;font-weight:900;letter-spacing:.2px;font-size:clamp(26px,3.2vw,36px);
  color:var(--navy-900);
}
.slogan b{color:var(--gold)}

/* Carousel (Einblicke): endlos, 3/2/1 sichtbar */
.carousel{position:relative;margin-top:16px}
.rail{display:flex;gap:18px;will-change:transform}
.slide{flex:0 0 calc((100% - 2*18px)/3);border-radius:22px;overflow:hidden;background:#dfe6ee;box-shadow:var(--shadow-card);min-height:320px;clip-path:polygon(0 6%, 92% 0, 100% 9%, 100% 94%, 8% 100%, 0 91%)}
.slide img{width:100%;height:100%;object-fit:cover;object-position:50% 15%}
@media (max-width:1100px){.slide{flex-basis:calc((100% - 18px)/2)}}
@media (max-width:720px){.slide{flex-basis:100%}}
.ctrl{position:absolute;inset:0;display:flex;justify-content:space-between;align-items:center;pointer-events:none}
.ctrl button{pointer-events:auto;width:46px;height:46px;border-radius:50%;border:1px solid rgba(14,39,64,.25);background:rgba(14,39,64,.75);color:#fff;cursor:pointer;display:grid;place-items:center}
.ctrl button:hover{background:rgba(14,39,64,.9)}

/* Abschluss-Block */
.triple{display:grid;gap:22px;grid-template-columns:repeat(3,1fr)}
@media (max-width:980px){.triple{grid-template-columns:1fr}}
.triple .card-white{border:1px solid rgba(14,39,64,.08)}
.badge{
  display:inline-flex;align-items:center;gap:10px;padding:8px 12px;border-radius:999px;
  border:1px solid #d8e3ec;background:#f6f9fc;color:#1c2f45;font-weight:600
}
.badge svg{width:22px;height:22px}

/* Reveal (sanft, erst wenn in der Mitte) */
.reveal{opacity:0;transform:translateY(18px);transition:opacity .6s ease, transform .6s ease}
.reveal.on{opacity:1;transform:none}

/* Footer */
footer{padding:42px 0 56px;text-align:center;color:#345068}
footer a{color:#102840;border-bottom:1px solid #a2b6c7}
footer a:hover{color:#0b2138}
</style>
</head>
<body>

<!-- HERO -->
<header class="hero">
  <div class="container hero-wrap">
    <div class="hero-txt">
      <h1>Dardan Ibri</h1>
      <div class="hero-sub">Entwickler f√ºr Menschen &amp; Business</div>
      <p class="lead mt16">
        Struktur, Strategie und Bewusstsein ‚Äì klar gedacht, menschlich umgesetzt.
        Ich verbinde Logik mit Emotion, damit Entwicklung <b>messbar</b> und <b>lebendig</b> wird.
      </p>
      <div class="hero-actions">
        <a class="btn btn-gold" href="mailto:info@dardanibri.com">Kontakt aufnehmen</a>
        <a class="btn btn-ghost" href="https://www.linkedin.com/in/dardan-ibri-3988591b4/" target="_blank" rel="noopener">LinkedIn ansehen</a>
      </div>
    </div>
    <div class="portrait reveal">
      <img src="assets/images/dardan-hero.jpg" alt="Dardan Ibri Portrait">
    </div>
  </div>
</header>

<main>

  <!-- Vision & Mission (ohne globalen Titel) -->
  <section class="tight">
    <div class="container vm">
      <article class="card card-dark halo reveal">
        <h3>Vision</h3>
        <p class="lead">Mit Logik und Weitsicht echte Emotionen wecken, um Grossartiges zu erreichen.</p>
      </article>
      <article class="card card-gold halo reveal">
        <h3>Mission</h3>
        <p class="lead">Menschen und Unternehmen durch Struktur, Strategie und Bewusstsein in nachhaltiges Wachstum zu f√ºhren.</p>
      </article>
    </div>
  </section>

  <!-- Werte -->
  <section>
    <div class="container">
      <h2>Werte</h2>

      <div class="grid grid-3 mt24">
        <!-- Klarheit -->
        <article class="card card-dark halo value reveal">
          <div class="icon" aria-hidden="true">
            <!-- Bullseye / Fokus -->
            <svg viewBox="0 0 48 48"><circle cx="24" cy="24" r="16"></circle><circle cx="24" cy="24" r="4" fill="currentColor" stroke="none"/></svg>
          </div>
          <div>
            <h4>Klarheit</h4>
            <p>Ohne Klarheit keine Richtung.</p>
          </div>
        </article>

        <!-- Entwicklung (bleibt Gold) -->
        <article class="card value gold halo reveal">
          <div class="icon" aria-hidden="true" style="border-color:var(--navy-900)">
            <!-- Level-Up im Kreis -->
            <svg viewBox="0 0 48 48" style="color:var(--navy-900)"><circle cx="24" cy="24" r="16"></circle><path d="M16 28l8-8 8 8M24 20v12" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
          </div>
          <div>
            <h4>Entwicklung</h4>
            <p>Wachstum entsteht durch Neugier und Mut.</p>
          </div>
        </article>

        <!-- Verantwortung -->
        <article class="card card-dark halo value reveal">
          <div class="icon" aria-hidden="true">
            <!-- zwei Haken/H√§nde -->
            <svg viewBox="0 0 48 48"><path d="M16 26l7 7 9-9" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </div>
          <div>
            <h4>Verantwortung</h4>
            <p>Erfolg ist das Resultat bewusster Entscheidungen.</p>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- √úber mich -->
  <section>
    <div class="container">
      <h2>√úber mich</h2>
      <article class="card card-dark halo reveal mt16">
        <p class="lead">
          Ich bin gelernter Techniker HF Maschinenbau (Juventus Z√ºrich) und habe √ºber Jahre Anlagen und Maschinen f√ºr internationale Industriekunden entwickelt ‚Äì von Japan √ºber China und Indien bis in die USA, den Nahen Osten und Europa.
        </p>
        <p class="lead">
          Mit <b>27 Jahren</b> entschied ich mich, meinen bekannten Weg zu verlassen ‚Äì weg von der Entwicklung von Maschinen, hin zur Entwicklung von Menschen und Business. √úber die Finanzbranche und meine Ausbildung im Neuro-Linguistischen Programmieren (NLP Practitioner &amp; Master) fand ich meinen Zugang, Logik mit Emotion zu verbinden und daraus messbare Entwicklung zu schaffen.
        </p>
      </article>
    </div>
  </section>

  <!-- Heute ‚Äì im Unternehmen -->
  <section>
    <div class="container">
      <h2>Heute ‚Äì im Unternehmen</h2>
      <article class="card card-dark halo reveal mt16">
        <p class="lead">
          Heute setze ich meine Erfahrung in <b>Vertrieb, Referaten</b> und <b>gezielten Ausbildungen</b> ein, um Unternehmen in ihrer <b>Struktur-, Prozess- und Teamentwicklung</b> aktiv mitzugestalten. Dabei verbinde ich <b>strategisches Denken</b> mit <b>emotionaler Intelligenz</b>, um nachhaltige und lebendige Ver√§nderungen zu erm√∂glichen.
        </p>
        <p class="lead mt16">
          <em>Innerhalb der Unternehmen:</em> <b>MG Coaching</b> (Personal- &amp; Business-Coaching) und <b>Evergrow</b> (Vertrieb &amp; Wachstum).
        </p>

        <!-- Logos -->
        <div class="logos mt24">
          <img src="assets/logos/mg.png" alt="MG Coaching">
          <img src="assets/logos/evergrow.png" alt="Evergrow">
        </div>

        <!-- integrierte KPIs -->
        <div class="kpis mt24">
          <div class="kpi gold reveal">
            <div class="knum" data-count="150" data-delay="120">0</div>
            <div class="klabel">Ausbildungstage</div>
          </div>
          <div class="kpi reveal">
            <div class="knum" data-count="6" data-delay="220">0</div>
            <div class="klabel">Branchen (Finanzen &amp; Versicherung, Coaching, Personalvermittlung, Immobilien, Vitalit√§t &amp; Vertrieb)</div>
          </div>
        </div>
      </article>
    </div>
  </section>

  <!-- Als Referent & Impulsgeber -->
  <section>
    <div class="container">
      <h2>Als Referent &amp; Impulsgeber</h2>
      <article class="card card-dark halo reveal mt16">
        <p class="lead">
          Dieses Wissen, diese Strukturen und die daf√ºr n√∂tigen emotionalen Impulse gebe ich seit √ºber <b>vier Jahren</b> an Kunden und Partner aus verschiedensten Branchen weiter.
        </p>

        <h3 class="mt24">Warum funktioniert das in allen Bereichen der Wirtschaft?</h3>
        <p class="lead mt8">
          Weil es nie allein um das Produkt oder die Dienstleistung geht ‚Äì sondern um das <b>WARUM</b> dahinter: den Sinn, der Menschen bewegt, und die Haltung, die Erfolg m√∂glich macht.
        </p>

        <!-- Partnerlogos -->
        <div class="logos mt24">
          <img src="assets/logos/ssm.png" alt="SSM Partner">
          <img src="assets/logos/allianz.png" alt="Allianz">
          <img src="assets/logos/properti.png" alt="Properti">
          <img src="assets/logos/icm.png" alt="ICM Bau">
        </div>

        <!-- integrierte KPIs -->
        <div class="kpis mt24">
          <div class="kpi reveal">
            <div class="knum" data-count="500" data-delay="140">0</div>
            <div class="klabel">Teilnehmende</div>
          </div>
          <div class="kpi gold reveal">
            <div class="knum" data-count="3500" data-delay="240">0</div>
            <div class="klabel">Investierte Stunden in Entwicklung</div>
          </div>
        </div>
      </article>
    </div>
  </section>

  <!-- Slogan (vor Einblicke) -->
  <section class="tight">
    <div class="container">
      <p class="slogan reveal">
        <b>Logik</b> bringt Klarheit. <b>Emotion</b> bringt Energie. <b>Beides</b> schafft Wachstum.
      </p>
    </div>
  </section>

  <!-- Einblicke ‚Äì Endlos-Karussell -->
  <section id="einblicke">
    <div class="container">
      <h2>Einblicke</h2>
      <div class="carousel reveal">
        <div class="rail" id="rail">
          <!-- Slides (12) -->
          <div class="slide"><img src="assets/images/ref1.jpg"  alt="Einblick 1"></div>
          <div class="slide"><img src="assets/images/ref8.jpg"  alt="Einblick 2"></div>
          <div class="slide"><img src="assets/images/ref3.jpg"  alt="Einblick 3"></div>
          <div class="slide"><img src="assets/images/ref4.jpg"  alt="Einblick 4"></div>
          <div class="slide"><img src="assets/images/ref9.jpg"  alt="Einblick 5"></div>
          <div class="slide"><img src="assets/images/ref2.jpg"  alt="Einblick 6"></div>
          <div class="slide"><img src="assets/images/ref5.jpg"  alt="Einblick 7"></div>
          <div class="slide"><img src="assets/images/ref11.jpg" alt="Einblick 8"></div>
          <div class="slide"><img src="assets/images/ref6.jpg"  alt="Einblick 9"></div>
          <div class="slide"><img src="assets/images/ref12.jpg" alt="Einblick 10"></div>
          <div class="slide"><img src="assets/images/ref7.jpg"  alt="Einblick 11"></div>
          <div class="slide"><img src="assets/images/ref10.jpg" alt="Einblick 12"></div>
        </div>
        <div class="ctrl">
          <button id="prev" aria-label="Zur√ºck">‚Äπ</button>
          <button id="next" aria-label="Weiter">‚Ä∫</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Abschluss: Privat / Referenzen / Kontakt (ohne Telefonnummer) -->
  <section>
    <div class="container">
      <div class="triple">
        <article class="card card-white halo reveal">
          <span class="badge">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 10l9-7 9 7v8a2 2 0 0 1-2 2h-3a2 2 0 0 1-2-2V13H8v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-8z"/></svg>
            Privat
          </span>
          <p class="lead mt16">Verheiratet, 1 Sohn, wohnhaft im Grossraum Z√ºrich.</p>
        </article>

        <article class="card card-white halo reveal">
          <span class="badge">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16v16H4z"/><path d="M8 8h8M8 12h8M8 16h8"/></svg>
            Referenzen
          </span>
          <p class="lead mt16">Detaillierte Ausk√ºnfte √ºber meine Leistungen werden auf Anfrage gerne vorgelegt.</p>
        </article>

        <article class="card card-white halo reveal">
          <span class="badge">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92V21a2 2 0 0 1-2.18 2A19.86 19.86 0 0 1 3 7.18 2 2 0 0 1 5 5h4.09a2 2 0 0 1 2 1.72l.57 3.42a2 2 0 0 1-.55 1.82l-1.27 1.27a16 16 0 0 0 6.88 6.88l1.27-1.27a2 2 0 0 1 1.82-.55l3.42.57A2 2 0 0 1 22 16.92z"/></svg>
            Kontakt
          </span>
          <p class="lead mt16">
            Gerne d√ºrfen Sie sich direkt bei mir melden.<br>
            ‚úâÔ∏è <a href="mailto:info@dardanibri.com">info@dardanibri.com</a><br>
            üîó <a href="https://www.linkedin.com/in/dardan-ibri-3988591b4/" target="_blank" rel="noopener">LinkedIn ‚Äì Dardan Ibri</a>
          </p>
        </article>
      </div>
    </div>
  </section>

</main>

<footer>
  <div class="container">
    ¬© <span id="y"></span> Dardan Ibri ¬∑
    <a href="https://www.linkedin.com/in/dardan-ibri-3988591b4/" target="_blank" rel="noopener">LinkedIn</a>
  </div>
</footer>

<script>
/* Jahr */
document.getElementById('y').textContent = new Date().getFullYear();

/* Reveal ‚Äì erst wenn ~60% im View (ruhiger) */
const reveals = document.querySelectorAll('.reveal');
const io = new IntersectionObserver((entries,obs)=>{
  entries.forEach(e=>{
    if(e.isIntersecting){
      e.target.classList.add('on');
      obs.unobserve(e.target);
    }
  });
},{threshold:.6});
reveals.forEach(el=>io.observe(el));

/* KPI Count with delay per card */
const knums = document.querySelectorAll('.knum');
const io2 = new IntersectionObserver((entries,obs)=>{
  entries.forEach(e=>{
    if(!e.isIntersecting) return;
    const el = e.target;
    const target = +el.dataset.count;
    const delay = +(el.dataset.delay||120);
    setTimeout(()=>{
      let cur = 0;
      const steps = 60;
      const inc = Math.max(1, Math.round(target/steps));
      const tick = ()=>{
        cur += inc;
        if(cur >= target){ el.textContent = target.toLocaleString('de-CH') + (target>=150?'+':''); return; }
        el.textContent = cur.toLocaleString('de-CH') + (target>=150?'+':'');
        requestAnimationFrame(tick);
      };
      tick();
    }, delay);
    obs.unobserve(el);
  });
},{threshold:.6});
knums.forEach(n=>io2.observe(n));

/* Endlos-Carousel (3/2/1 per View) */
(function(){
  const rail = document.getElementById('rail');
  const prev = document.getElementById('prev');
  const next = document.getElementById('next');

  let slides = Array.from(rail.children);
  let perView = 3;
  const GAP = 18;
  function updatePerView(){
    if (window.matchMedia('(max-width:720px)').matches) perView = 1;
    else if (window.matchMedia('(max-width:1100px)').matches) perView = 2;
    else perView = 3;
  }
  updatePerView();
  window.addEventListener('resize', ()=>{ updatePerView(); setImmediateSize(); });

  // clone for infinity
  function cloneEnds(){
    const n = perView + 2;
    const head = slides.slice(0,n).map(s=>s.cloneNode(true));
    const tail = slides.slice(-n).map(s=>s.cloneNode(true));
    tail.forEach(n=>rail.insertBefore(n, rail.firstChild));
    head.forEach(n=>rail.appendChild(n));
    slides = Array.from(rail.children);
  }

  function slideWidth(){
    const s = slides[0].getBoundingClientRect();
    return s.width + GAP;
  }

  let index = 0;
  let offsetIndex = 0;

  function setImmediateSize(){
    rail.style.transition = 'none';
    const w = slideWidth();
    rail.style.transform = `translate3d(${-offsetIndex*w}px,0,0)`;
    // force reflow
    void rail.offsetWidth;
    rail.style.transition = 'transform .55s ease';
  }

  function init(){
    cloneEnds();
    offsetIndex = perView + 2;
    index = offsetIndex;
    setImmediateSize();
  }

  function go(dir){
    const w = slideWidth();
    index += dir;
    rail.style.transform = `translate3d(${-index*w}px,0,0)`;
    // boundary jump
    setTimeout(()=>{
      const total = slides.length;
      const n = perView + 2;
      const maxIndex = total - n - 1;
      if(index > maxIndex){ index = n; rail.style.transition='none'; rail.style.transform = `translate3d(${-index*w}px,0,0)`; void rail.offsetWidth; rail.style.transition='transform .55s ease'; }
      if(index < n){ index = maxIndex; rail.style.transition='none'; rail.style.transform = `translate3d(${-index*w}px,0,0)`; void rail.offsetWidth; rail.style.transition='transform .55s ease'; }
    }, 580);
  }

  // autoplay (stop on hover)
  let timer = null;
  function start(){ timer = setInterval(()=>go(1), 3600); }
  function stop(){ if(timer) clearInterval(timer); }
  rail.parentElement.addEventListener('mouseenter', stop);
  rail.parentElement.addEventListener('mouseleave', start);

  prev.addEventListener('click', ()=>go(-1));
  next.addEventListener('click', ()=>go(1));

  // touch swipe
  let sx=null;
  rail.addEventListener('touchstart', e=>{ sx=e.touches[0].clientX; stop(); }, {passive:true});
  rail.addEventListener('touchmove', e=>{
    if(sx===null) return;
    const dx = e.touches[0].clientX - sx;
    if(Math.abs(dx)>40){ go(dx<0?1:-1); sx=null; }
  }, {passive:true});
  rail.addEventListener('touchend', ()=>{ sx=null; start(); });

  // init
  requestAnimationFrame(()=>{ init(); start(); });
})();
</script>
</body>
</html>
